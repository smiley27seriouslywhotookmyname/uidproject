<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Which Stranger Things Character Are You Quiz</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        body {
            font-family: 'Benguiat', 'Courier New', monospace;
            background-color: #0a0a0a;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
            background-image: radial-gradient(#e60000 1px, transparent 1px);
            background-size: 30px 30px;
            background-position: -15px -15px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: rgba(15, 15, 15, 0.95);
            border: 2px solid #e60000;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(230, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            color: #e60000;
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(230, 0, 0, 0.7);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .quiz-container {
            margin-top: 20px;
        }
        
        .question {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #ffffff;
        }
        
        .options {
            display: grid;
            gap: 10px;
        }
        
        .option {
            background-color: #1a1a1a;
            border: 1px solid #e60000;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .option:hover {
            background-color: #2a1a1a;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(230, 0, 0, 0.3);
        }
        
        .option.selected {
            background-color: #3a1a1a;
            border-color: #ff9900;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #1a1a1a;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #e60000;
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px #e60000;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        button {
            background-color: #e60000;
            color: #ffffff;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-family: 'Benguiat', 'Courier New', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        button:hover {
            background-color: #ff1a1a;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        button:disabled {
            background-color: #5c0000;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        #results-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .results-content {
            position: relative;
            background-color: #121212;
            border: 3px solid #e60000;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            box-shadow: 0 0 30px rgba(230, 0, 0, 0.5);
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .character-result {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .character-image {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            border: 3px solid #e60000;
            margin-bottom: 20px;
            background-color: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            color: #aaaaaa;
            text-align: center;
            overflow: hidden;
            position: relative;
            box-shadow: 0 5px 15px rgba(230, 0, 0, 0.3);
        }
        
        .character-name {
            font-size: 2rem;
            color: #e60000;
            margin-bottom: 10px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(230, 0, 0, 0.5);
        }
        
        .character-description {
            text-align: center;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .close-results {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: transparent;
            color: #e60000;
            border: 1px solid #e60000;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .close-results:hover {
            background-color: #e60000;
            color: #121212;
        }
        
        .chart-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            height: 350px;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }
        
        .color-box {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            border-radius: 3px;
        }
        
        .result-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 20px;
    flex-wrap: wrap;
}

.restart-button, .homepage-button {
    padding: 12px 25px;
    font-size: 1.1rem;
    min-width: 180px;
}

.homepage-button {
    background-color: #2d5aa0;
}

.homepage-button:hover {
    background-color: #3a6bb8;
}         
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .character-image {
                width: 180px;
                height: 180px;
            }
            
            .chart-container {
                height: 250px;
            }
 .restart-button, .homepage-button {
        width: 100%;
        max-width: 250px;
    }

        }

        /* Custom Stranger Things styles */
        h1::before, h1::after {
            content: '';
            display: inline-block;
            width: 40px;
            height: 2px;
            background-color: #e60000;
            margin: 0 10px;
            vertical-align: middle;
        }

        .d3-tooltip {
            box-shadow: 0 0 10px rgba(230, 0, 0, 0.7);
            border: 1px solid #e60000;
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; }
            10% { opacity: 0.9; }
            20% { opacity: 1; }
            30% { opacity: 0.9; }
            40% { opacity: 1; }
            50% { opacity: 0.9; }
            60% { opacity: 1; }
            70% { opacity: 0.9; }
            80% { opacity: 1; }
            90% { opacity: 0.9; }
        }

        h1 {
            animation: flicker 5s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Which Stranger Things Character Are You?</h1>
        
        <div id="quiz-container" class="quiz-container">
            <div id="question" class="question"></div>
            <div id="options" class="options"></div>
            
            <div class="progress-bar">
                <div id="progress" class="progress"></div>
            </div>
            
            <div class="navigation">
                <button id="prev-btn" disabled>Previous</button>
                <button id="next-btn">Next</button>
            </div>
        </div>
    </div>
    
    <div id="results-popup">
        <div class="results-content">
            <button class="close-results" id="close-results">Ã—</button>
            
            <div class="character-result">
                <div class="character-image" id="character-image">
                    [Character Image]
                </div>
                <h2 class="character-name" id="character-name"></h2>
                <p class="character-description" id="character-description"></p>
            </div>
            
            <h3 style="text-align: center; color: #e60000;">Your Stranger Things Match</h3>
            <div class="chart-container" id="chart-container"></div>
            <div class="legend" id="legend"></div>
            
              <div class="result-buttons">
    <button class="restart-button" id="restart-btn">Take Quiz Again</button>
    <button class="homepage-button" id="homepage-btn">Play More Quizzes</button>
</div>
        </div>
    </div>
<script>
const strangerThingsCharacters = [
    {
        name: "Eleven",
        description: "Powerful and determined, you have extraordinary abilities that set you apart. Like Eleven, you're loyal to your friends and willing to sacrifice for those you care about. Despite facing hardships, you maintain a sense of curiosity about the world. You're resilient and can be fierce when protecting your loved ones. Though sometimes quiet and introspective, your actions speak volumes about your character.",
        image: "https://i.redd.it/favorite-eleven-jane-hopper-hairstyle-v0-qrlferiuqclc1.jpg?width=1259&format=pjpg&auto=webp&s=7891e9db6772a5849440f54f1e4b07106ec871ea",
        color: "#E60000" // Bright Red
    },
    {
        name: "Mike Wheeler",
        description: "You're a natural leader with a strong moral compass. Like Mike, you're loyal, empathetic, and always willing to help friends in need. You have an imaginative mind and often think outside the box when solving problems. Your determination is unwavering, especially when standing up for what's right. While you might be sensitive at times, your emotional intelligence helps you connect deeply with others.",
        image: "https://i.pinimg.com/736x/9e/67/ce/9e67ce5eacb997da6cbd06f80d794999.jpg",
        color: "#24559A" // Navy Blue
    },
    {
        name: "Dustin Henderson",
        description: "Witty and intelligent, you're the one who brings humor to tense situations. Like Dustin, you're curious about the world and have an encyclopedic knowledge of your interests. You're the glue that holds your friend group together, with a unique ability to bridge social divides. Your loyalty is unquestionable, and your optimism is infectious. When faced with challenges, you combine creativity with logical thinking.",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSrtVbdzTeMdfb5plCLshx56Jp4-iljEXdz0g&s",
        color: "#FFAA00" // Yellow/Gold
    },
    {
        name: "Lucas Sinclair",
        description: "Practical and skeptical, you approach situations with caution and logic. Like Lucas, you're protective of your friends and family, often serving as the voice of reason in your group. Your straightforward nature means you speak your mind, even when others might hold back. Though initially resistant to change, you show remarkable bravery and adaptability when it counts. Your strategic mind is invaluable in difficult situations.",
        image: "https://i.pinimg.com/736x/e3/32/05/e332054b0d2f4cd0dd78d3792fc64b52.jpg",
        color: "#4CAF50" // Green
    },
    {
        name: "Will Byers",
        description: "Sensitive and creative, you have a rich inner world. Like Will, you're perceptive and intuitively understand things others might miss. You're deeply loyal to your friends and family, valuing these connections above all else. Though you might seem quiet or reserved, you possess unexpected strength and resilience. Your creative thinking and ability to communicate through art or other means gives you a unique perspective.",
        image: "https://static.wikia.nocookie.net/stranger-things-the-fall-of-hawkins/images/b/b4/Will_Byers.jpg/revision/latest?cb=20230130141306",
        color: "#9E6BB1" // Purple
    },
    {
        name: "Max Mayfield",
        description: "Independent and tough, you don't easily let others into your world. Like Max, you're skilled and confident in your abilities, with a competitive streak. Behind your guarded exterior lies a fiercely loyal friend who will stand up against injustice. You face challenges with determination and aren't afraid to break rules when necessary. Your resilience and adaptability help you thrive in new environments.",
        image: "https://cdn.apollo.audio/one/media/66b5/eca4/2a9f/0005/9fe8/b8a5/sadie-sink-max-stranger-things.jpg?quality=80&format=jpg&crop=0,0,901,1604&resize=crop",
        color: "#FF6B4A" // Orange-red
    },
    {
        name: "Nancy Wheeler",
        description: "You're intelligent, driven, and seek the truth no matter the cost. Like Nancy, you transform from someone concerned with social standing to someone who fights for justice. Your investigative nature and attention to detail help you solve problems others might miss. Though you can be stubborn in your pursuits, your courage and determination are admirable. You're willing to put yourself at risk to protect others.",
        image: "https://static.wikia.nocookie.net/strangerthings8338/images/2/29/Nancy_S2_alt.png/revision/latest?cb=20231020161156",
        color: "#9C27B0" // Deep Purple
    },
    {
        name: "Steve Harrington",
        description: "You've experienced significant personal growth, changing from someone focused on status to someone who genuinely cares for others. Like Steve, you're protective and willing to put yourself in danger to help those in need. You've learned from past mistakes and continuously strive to be better. Though you might pretend to be tough, you have a big heart and surprising emotional intelligence. Your loyalty, once earned, is unwavering.",
        image: "https://static.wikia.nocookie.net/strangerthings8338/images/8/8b/ST3_Steve_Harrington_portrait.jpg/revision/latest?cb=20220531055639",
        color: "#3949AB" // Indigo
    },
    {
        name: "Jim Hopper",
        description: "Gruff but deeply caring, you have a strong protective instinct. Like Hopper, you might put up walls due to past pain, but your capacity for love and sacrifice is immense. You're practical, resourceful, and don't hesitate to take action when needed. Though sometimes stubborn and set in your ways, you grow through your connections with others. Your sense of justice drives you, and you'll go to extraordinary lengths to protect those you consider family.",
        image: "https://assets.capitalfm.com/2017/45/jim-hopper-stranger-things--1509984237-view-0.jpg",
        color: "#795548" // Brown
    },
    {
        name: "Joyce Byers",
        description: "Fiercely protective and determined, you never give up on those you love. Like Joyce, you trust your instincts even when others doubt you. Your persistence in the face of dismissal or ridicule is remarkable. Though you might seem anxious or high-strung at times, these qualities come from a place of deep caring. Your intuitive understanding of situations and people helps you see beyond surface appearances.",
        image: "https://upload.wikimedia.org/wikipedia/en/4/40/ST4_Joyce.png",
        color: "#FF9800" // Amber
    },
    {
        name: "Robin Buckley",
        description: "Sharp-witted and sarcastic, you have a unique perspective that helps you see through social constructs. Like Robin, you're intelligent and quick-thinking, with specialized knowledge that proves surprisingly useful. Though you might use humor as a defense mechanism, you're actually quite sensitive and thoughtful. Your authenticity and willingness to be yourself, regardless of social pressures, is your strength. You're loyal to your friends and surprisingly brave in the face of danger.",
        image: "https://i.pinimg.com/736x/0a/4b/40/0a4b4083d270921ec7d6398a22adc233.jpg",
        color: "#00BCD4" // Cyan
    }
];

const strangerThingsQuestions = [
    {
        question: "How do you typically handle scary or dangerous situations?",
        options: [
            { text: "Face them head-on using my unique abilities or strengths", character: "Eleven" },
            { text: "Rally the group and make a plan to tackle it together", character: "Mike Wheeler" },
            { text: "Use my knowledge and research to understand the threat first", character: "Dustin Henderson" },
            { text: "Approach cautiously and prepare for all possibilities", character: "Lucas Sinclair" },
            { text: "Try to sense or understand what's happening on a deeper level", character: "Will Byers" },
            { text: "Rely on my skills and independence to overcome it", character: "Max Mayfield" },
            { text: "Investigate thoroughly until I uncover the truth", character: "Nancy Wheeler" },
            { text: "Step up to protect others, even if I'm scared myself", character: "Steve Harrington" },
            { text: "Take charge and use my experience to handle the situation", character: "Jim Hopper" },
            { text: "Trust my instincts and persist even when others doubt me", character: "Joyce Byers" },
            { text: "Use my wit and ability to think outside conventional boundaries", character: "Robin Buckley" }
        ]
    },
    {
        question: "What role do you usually play in your friend group?",
        options: [
            { text: "The quiet but powerful one who others turn to when needed", character: "Eleven" },
            { text: "The leader who keeps everyone together and on track", character: "Mike Wheeler" },
            { text: "The funny one who lightens the mood with jokes and facts", character: "Dustin Henderson" },
            { text: "The realistic one who points out potential problems", character: "Lucas Sinclair" },
            { text: "The creative one who sees things from a different perspective", character: "Will Byers" },
            { text: "The tough one who pushes the group to be braver", character: "Max Mayfield" },
            { text: "The determined one who pursues the truth at all costs", character: "Nancy Wheeler" },
            { text: "The unexpected caretaker who looks out for everyone", character: "Steve Harrington" },
            { text: "The protective authority figure who sets boundaries", character: "Jim Hopper" },
            { text: "The nurturing one who fights fiercely for loved ones", character: "Joyce Byers" },
            { text: "The clever outsider with unique perspectives and skills", character: "Robin Buckley" }
        ]
    },
    {
        question: "What's your biggest strength in difficult situations?",
        options: [
            { text: "My unexplainable abilities or gut feelings that guide me", character: "Eleven" },
            { text: "My unwavering loyalty and ability to inspire others", character: "Mike Wheeler" },
            { text: "My knowledge and ability to think creatively about problems", character: "Dustin Henderson" },
            { text: "My practicality and ability to stay realistic", character: "Lucas Sinclair" },
            { text: "My sensitivity to things others might not notice", character: "Will Byers" },
            { text: "My independence and willingness to take risks", character: "Max Mayfield" },
            { text: "My determination to uncover the truth no matter what", character: "Nancy Wheeler" },
            { text: "My growing maturity and willingness to protect others", character: "Steve Harrington" },
            { text: "My experience and ability to take decisive action", character: "Jim Hopper" },
            { text: "My unwavering instincts about those I care for", character: "Joyce Byers" },
            { text: "My intelligence and ability to decode complex problems", character: "Robin Buckley" }
        ]
    },
    {
        question: "What's your biggest weakness or challenge?",
        options: [
            { text: "Communicating my thoughts and feelings to others", character: "Eleven" },
            { text: "Being too emotionally invested in others' problems", character: "Mike Wheeler" },
            { text: "Sometimes getting carried away with theories or excitement", character: "Dustin Henderson" },
            { text: "Initial skepticism that can make me resistant to new ideas", character: "Lucas Sinclair" },
            { text: "Being affected by traumatic experiences or dark emotions", character: "Will Byers" },
            { text: "Finding it hard to trust others and let them in", character: "Max Mayfield" },
            { text: "Becoming obsessive about finding answers", character: "Nancy Wheeler" },
            { text: "Overcoming my past mistakes and reputation", character: "Steve Harrington" },
            { text: "Letting past grief affect my current relationships", character: "Jim Hopper" },
            { text: "Being dismissed as overreactive or paranoid", character: "Joyce Byers" },
            { text: "Using sarcasm and wit to hide vulnerability", character: "Robin Buckley" }
        ]
    },
    {
        question: "How do you react when someone new enters your social circle?",
        options: [
            { text: "Cautiously assess them and their intentions before trusting", character: "Eleven" },
            { text: "Try to welcome them and integrate them into the group", character: "Mike Wheeler" },
            { text: "Get excited about learning what unique qualities they bring", character: "Dustin Henderson" },
            { text: "Remain skeptical until they prove themselves trustworthy", character: "Lucas Sinclair" },
            { text: "Quietly observe them and how they interact with others", character: "Will Byers" },
            { text: "Keep my distance at first but warm up if they're genuine", character: "Max Mayfield" },
            { text: "Assess their character and what they might be hiding", character: "Nancy Wheeler" },
            { text: "Initially maintain my social status but eventually welcome them", character: "Steve Harrington" },
            { text: "Establish clear boundaries while figuring them out", character: "Jim Hopper" },
            { text: "Judge them based on how they treat my loved ones", character: "Joyce Byers" },
            { text: "Use humor to test their reactions and personality", character: "Robin Buckley" }
        ]
    },
    {
        question: "What would you do if you discovered something supernatural?",
        options: [
            { text: "Try to understand it using my own unusual experiences", character: "Eleven" },
            { text: "Gather my friends to investigate and respond together", character: "Mike Wheeler" },
            { text: "Research everything I can about it and develop theories", character: "Dustin Henderson" },
            { text: "Consider the potential dangers before getting involved", character: "Lucas Sinclair" },
            { text: "Sense a deeper connection to it that others might not understand", character: "Will Byers" },
            { text: "Face it head-on with whatever skills and tools I have", character: "Max Mayfield" },
            { text: "Document evidence and pursue the truth relentlessly", character: "Nancy Wheeler" },
            { text: "Initially doubt it, then step up to protect others from it", character: "Steve Harrington" },
            { text: "Investigate thoroughly while keeping others safe", character: "Jim Hopper" },
            { text: "Trust my instincts about it even if others are skeptical", character: "Joyce Byers" },
            { text: "Apply my unconventional thinking to understand its patterns", character: "Robin Buckley" }
        ]
    },
    {
        question: "What's your approach to rules and authority?",
        options: [
            { text: "Follow rules I understand, but carve my own path when necessary", character: "Eleven" },
            { text: "Generally respect rules but will break them for the greater good", character: "Mike Wheeler" },
            { text: "Understand why rules exist but question ones that seem illogical", character: "Dustin Henderson" },
            { text: "Mostly follow rules but challenge them when they seem wrong", character: "Lucas Sinclair" },
            { text: "Follow rules to avoid conflict but sense when something else is needed", character: "Will Byers" },
            { text: "Question authority and push boundaries when they limit me", character: "Max Mayfield" },
            { text: "Follow societal norms at first, then question them as I grow", character: "Nancy Wheeler" },
            { text: "Start as a rule-enforcer, later question which rules truly matter", character: "Steve Harrington" },
            { text: "Enforce rules but bend them when necessary for the right reasons", character: "Jim Hopper" },
            { text: "Disregard rules entirely when they interfere with protecting loved ones", character: "Joyce Byers" },
            { text: "See the system's flaws and work around them creatively", character: "Robin Buckley" }
        ]
    },
    {
        question: "How would your friends describe your personality?",
        options: [
            { text: "Mysterious, loyal, and more powerful than I appear", character: "Eleven" },
            { text: "Passionate, determined, and always there for them", character: "Mike Wheeler" },
            { text: "Enthusiastic, funny, and full of interesting facts", character: "Dustin Henderson" },
            { text: "Practical, honest, and reliable when it counts", character: "Lucas Sinclair" },
            { text: "Sensitive, creative, and perceptive to undercurrents", character: "Will Byers" },
            { text: "Bold, independent, and not afraid to speak my mind", character: "Max Mayfield" },
            { text: "Focused, driven, and unwilling to accept easy answers", character: "Nancy Wheeler" },
            { text: "Initially arrogant but evolving into someone caring and protective", character: "Steve Harrington" },
            { text: "Gruff but dependable, with hidden depths of caring", character: "Jim Hopper" },
            { text: "Intensely devoted, intuitive, and unstoppable when determined", character: "Joyce Byers" },
            { text: "Sarcastic, intelligent, and authentic despite social pressures", character: "Robin Buckley" }
        ]
    },
    {
        question: "How do you handle loss or grief?",
        options: [
            { text: "Withdraw to process my emotions, then channel them into action", character: "Eleven" },
            { text: "Focus on supporting others while dealing with my own pain", character: "Mike Wheeler" },
            { text: "Try to understand and explain it, using humor to cope", character: "Dustin Henderson" },
            { text: "Process it internally while maintaining a strong exterior", character: "Lucas Sinclair" },
            { text: "Feel it deeply and express it through creative outlets", character: "Will Byers" },
            { text: "Put up walls but eventually face the emotions in my own way", character: "Max Mayfield" },
            { text: "Channel grief into determination to prevent similar losses", character: "Nancy Wheeler" },
            { text: "Initially hide my feelings, then grow through acknowledging them", character: "Steve Harrington" },
            { text: "Struggle with it deeply, sometimes turning to unhealthy coping mechanisms", character: "Jim Hopper" },
            { text: "Refuse to accept it, fighting against all odds for resolution", character: "Joyce Byers" },
            { text: "Use wit as a shield while processing emotions privately", character: "Robin Buckley" }
        ]
    },
    {
        question: "What's most important to you?",
        options: [
            { text: "Protecting the people who have shown me true friendship and love", character: "Eleven" },
            { text: "Maintaining loyalty to friends and standing up for what's right", character: "Mike Wheeler" },
            { text: "Curiosity, friendship, and discovering amazing things together", character: "Dustin Henderson" },
            { text: "Truth, security, and knowing I've prepared for whatever comes", character: "Lucas Sinclair" },
            { text: "Deep connections and being understood by those close to me", character: "Will Byers" },
            { text: "Independence while still having genuine connections with others", character: "Max Mayfield" },
            { text: "Justice, truth, and making sure the vulnerable are protected", character: "Nancy Wheeler" },
            { text: "Being someone others can rely on and respect genuinely", character: "Steve Harrington" },
            { text: "Protecting those in my care, especially those who can't protect themselves", character: "Jim Hopper" },
            { text: "Family bonds and the lengths we go to for those we love", character: "Joyce Byers" },
            { text: "Authenticity and connecting with people who accept me as I am", character: "Robin Buckley" }
        ]
    }
];

 let currentQuestion = 0;
let answers = [];

function loadQuestion() {
    const questionElement = document.getElementById('question');
    const optionsElement = document.getElementById('options');
    const progressElement = document.getElementById('progress');
    const prevButton = document.getElementById('prev-btn');
    const nextButton = document.getElementById('next-btn');
    
    // Update progress bar
    progressElement.style.width = `${(currentQuestion / strangerThingsQuestions.length) * 100}%`;
    
    // Enable/disable prev button
    prevButton.disabled = currentQuestion === 0;
    
    // Update next button text
    nextButton.textContent = currentQuestion === strangerThingsQuestions.length - 1 ? 'See Results' : 'Next';
    
    // Display current question
    questionElement.textContent = strangerThingsQuestions[currentQuestion].question;
    
    // Clear options
    optionsElement.innerHTML = '';
    
    // Add options
    strangerThingsQuestions[currentQuestion].options.forEach((option, index) => {
        const optionElement = document.createElement('div');
        optionElement.className = 'option';
        if (answers[currentQuestion] === index) {
            optionElement.classList.add('selected');
        }
        optionElement.textContent = option.text;
        optionElement.addEventListener('click', () => selectOption(index));
        optionsElement.appendChild(optionElement);
    });
}

function selectOption(index) {
    answers[currentQuestion] = index;
    document.querySelectorAll('.option').forEach((option, i) => {
        if (i === index) {
            option.classList.add('selected');
        } else {
            option.classList.remove('selected');
        }
    });
}

function nextQuestion() {
    if (answers[currentQuestion] === undefined) {
        // No option selected, show warning or force selection
        alert('Please select an option before continuing.');
        return;
    }
    
    if (currentQuestion < strangerThingsQuestions.length - 1) {
        currentQuestion++;
        loadQuestion();
    } else {
        showResults();
    }
}

function prevQuestion() {
    if (currentQuestion > 0) {
        currentQuestion--;
        loadQuestion();
    }
}

function calculateResults() {
   const results = {
        "Eleven": 0,
        "Mike Wheeler": 0,
        "Dustin Henderson": 0,
        "Lucas Sinclair": 0,
        "Will Byers": 0,
        "Max Mayfield": 0,
        "Nancy Wheeler": 0,
        "Steve Harrington": 0,
        "Jim Hopper": 0,
        "Joyce Byers": 0,
        "Robin Buckley": 0
    };    
    answers.forEach((answer, index) => {
        const selectedCharacter = strangerThingsQuestions[index].options[answer].character;
        results[selectedCharacter]++;
    });
    
    // Convert to percentages
    const total = strangerThingsQuestions.length;
    const percentages = {};
    
    for (const character in results) {
        percentages[character] = Math.round((results[character] / total) * 100);
    }
    
    return percentages;
}

function showResults() {
    const percentages = calculateResults();
    const resultsPopup = document.getElementById('results-popup');
    
    // Find the top character
    let topCharacter = "";
    let topPercentage = 0;
    
    for (const character in percentages) {
        if (percentages[character] > topPercentage) {
            topPercentage = percentages[character];
            topCharacter = character;
        }
    }
    
    // Find the character object
    const characterData = strangerThingsCharacters.find(char => char.name === topCharacter);
    
    // Update the result content
    document.getElementById('character-name').textContent = characterData.name;
    document.getElementById('character-description').textContent = characterData.description;
    
    // Create proper image element instead of using background-image
    const imageContainer = document.getElementById('character-image');
    imageContainer.innerHTML = '';
    
    const characterImg = document.createElement('img');
    characterImg.src = characterData.image;
    characterImg.alt = characterData.name;
    characterImg.style.width = '100%';
    characterImg.style.height = '100%';
    characterImg.style.objectFit = 'cover';
    characterImg.style.objectPosition = 'center';
    characterImg.style.borderRadius = '50%';
    
    imageContainer.appendChild(characterImg);
    
    // Create chart data
    const chartData = [];
    for (const character in percentages) {
        if (percentages[character] > 0) { // Only show characters with non-zero percentages
            const characterObj = strangerThingsCharacters.find(char => char.name === character);
            chartData.push({
                name: character,
                value: percentages[character],
                color: characterObj.color
            });
        }
    }
    
    // Create pie chart
    createPieChart(chartData);
    
    // Create legend
createLegend(chartData);
    
    // Show the popup
    resultsPopup.style.display = 'block';
}

function createPieChart(data) {
    // Clear previous chart
    const chartContainer = document.getElementById('chart-container');
    chartContainer.innerHTML = '';
    
    // Set dimensions
    const width = chartContainer.clientWidth || 500;
    const height = chartContainer.clientHeight || 350;
    const radius = Math.min(width, height) / 2 * 0.8;
    
    // Create SVG
    const svg = d3.select('#chart-container')
        .append('svg')
        .attr('width', width)
        .attr('height', height)
        .append('g')
        .attr('transform', `translate(${width / 2}, ${height / 2})`);
    
    // Create pie
    const pie = d3.pie()
        .value(d => d.value)
        .sort(null);
    
    // Define arc
    const arc = d3.arc()
        .innerRadius(radius * 0.4) // Donut hole size
        .outerRadius(radius);
    
    // Enhanced arc for hover effect
    const arcHover = d3.arc()
        .innerRadius(radius * 0.4)
        .outerRadius(radius * 1.08);
        
    // Add tooltip
    const tooltip = d3.select("body").append("div")
        .attr("class", "d3-tooltip")
        .style("position", "absolute")
        .style("padding", "8px")
        .style("background", "#333")
        .style("color", "#fff")
        .style("border-radius", "4px")
        .style("font-size", "12px")
        .style("pointer-events", "none")
        .style("opacity", 0);
        
    // Add slices with animation
    const slices = svg.selectAll('path')
        .data(pie(data))
        .enter()
        .append('path')
        .attr('d', arc)
        .attr('fill', d => d.data.color)
        .attr('stroke', '#0d1f2d') // Dark border for contrast
        .attr('stroke-width', 2)
        .style('transition', 'all 0.3s')
        .on('mouseover', function(event, d) {
            d3.select(this)
                .transition()
                .duration(200)
                .attr('d', arcHover);
                
            tooltip.transition()
                .duration(200)
                .style("opacity", 0.9);
            tooltip.html(`${d.data.name}: ${d.data.value}%`)
                .style("left", (event.pageX) + "px")
                .style("top", (event.pageY - 28) + "px");
        })
        .on('mouseout', function() {
            d3.select(this)
                .transition()
                .duration(200)
                .attr('d', arc);
                
            tooltip.transition()
                .duration(500)
                .style("opacity", 0);
        })
        .transition()
        .duration(1000)
        .attrTween('d', function(d) {
            const interpolate = d3.interpolate({startAngle: 0, endAngle: 0}, d);
            return function(t) {
                return arc(interpolate(t));
            };
        });
        
    // Add percentage labels
    svg.selectAll('text')
        .data(pie(data))
        .enter()
        .append('text')
        .attr('transform', d => {
            const centroid = arc.centroid(d);
            return `translate(${centroid[0]}, ${centroid[1]})`;
        })
        .attr('text-anchor', 'middle')
        .attr('dy', '0.35em') // Vertical alignment
        .text(d => d.data.value >= 10 ? `${d.data.value}%` : '') // Only show if segment is large enough
        .style('fill', '#ffffff')
        .style('font-weight', 'bold')
        .style('font-size', '14px')
        .style('text-shadow', '1px 1px 2px rgba(0, 0, 0, 0.7)')
        .style('pointer-events', 'none') // Prevent text from blocking hover
        .style('opacity', 0)
        .transition()
        .delay((d, i) => 1000 + i * 100)
        .duration(500)
        .style('opacity', 1);
        
    // Add center label
    svg.append('text')
        .attr('text-anchor', 'middle')
        .attr('dy', '0.35em')
        .text('Your Match')
        .style('fill', '#d9a149')
        .style('font-size', '18px')
        .style('font-weight', 'bold')
        .style('opacity', 0)
        .transition()
        .duration(500)
        .style('opacity', 1);
}

function createLegend(data) {
    const legendContainer = document.getElementById('legend');
    legendContainer.innerHTML = '';
    
    data.forEach(item => {
        const legendItem = document.createElement('div');
        legendItem.className = 'legend-item';
        
        const colorBox = document.createElement('div');
        colorBox.className = 'color-box';
        colorBox.style.backgroundColor = item.color;
        
        const nameLabel = document.createElement('span');
        nameLabel.textContent = `${item.name} (${item.value}%)`;
        
        legendItem.appendChild(colorBox);
        legendItem.appendChild(nameLabel);
        legendContainer.appendChild(legendItem);
    });
}

function restartQuiz() {
    answers = [];
    currentQuestion = 0;
    document.getElementById('results-popup').style.display = 'none';
    loadQuestion();
}
function goToHomepage() {
    window.location.href = 'index.html';
}


// Initialize the quiz
document.addEventListener('DOMContentLoaded', () => {
    // Load the first question
    loadQuestion();
    
    // Event listeners
    document.getElementById('prev-btn').addEventListener('click', prevQuestion);
    document.getElementById('next-btn').addEventListener('click', nextQuestion);
    document.getElementById('close-results').addEventListener('click', () => {
        document.getElementById('results-popup').style.display = 'none';
    });
    document.getElementById('restart-btn').addEventListener('click', restartQuiz);
document.getElementById('homepage-btn').addEventListener('click', goToHomepage);

});
</script>
</body>
</html>
